
<!--<script>-->
<!--      function initialize() {-->
<!--        var mapCanvas = document.getElementById('map');-->
<!--        var mapOptions = {-->
<!--          center: new google.maps.LatLng(44.5403, -78.5463),-->
<!--          zoom: 8,-->
<!--          mapTypeId: google.maps.MapTypeId.ROADMAP-->
<!--        }-->
<!--        var map = new google.maps.Map(mapCanvas, mapOptions)-->
<!--      }-->
<!--      google.maps.event.addDomListener(window, 'load', initialize);-->
<!--    </script>-->
<% if user_signed_in? %>
  <div class="main_content">
    <div class="row" id="recipe_top">
      <div class="col-md-4">
        <%= image_tag @recipe.image.url(:medium), class: "recipe_image" %>
      </div>
      <div class="col-md-8">
        <div id="recipe_info">
          <h1>
            <%= @recipe.title %>
          </h1>
          <p class="description">
            <%= @recipe.description %>
          </p>
          <p>
            Submitted by
            <%= @recipe.user.email %>
          </p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div id="ingredients">
          <h2>Menu</h2>
          <ul>
            <% @recipe.ingredients.each do |ingredient| %>
              <li>
                <%= ingredient.name %>
              </li>
            <% end %>
          </ul>
        </div>
      </div>
      <div class="col-md-6">
        <div id="directions">
          <h2>Directions</h2>
          <ul>
            <% @recipe.directions.each do |direction| %>
              <li>
                <%= direction.step %>
              </li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <%= link_to "Back", root_path, class: "btn btn-default" %>
        <% if user_signed_in? %>
          <%= link_to "Edit", edit_recipe_path, class: "btn btn-default" %>
          <%= link_to "Delete", recipe_path, method: :delete, data: {confirm: "Are you sure?" }, class: "btn btn-default" %>
        <% end %>
      </div>
    </div>
  </div>
  <div class="ibox-title">
  	<!--<form action="#" onsubmit="showAddress(this.address.value); return false">-->
     
   <!--   <p>-->
   <!--     <input type="text" name="address" value="Cyberjaya, Malaysia" />-->
   <!--     <input type="submit" value="Go!" />-->
   <!--   </p>-->
   <!--   <div id="map" style="height: 400px"></div>-->
   <!-- </form>-->
    

   <input type="text" id="search" class="searchform">
   <input type="button" onclick="geocode();" value="Search" class="submitbtn">
   
   <br><br>
	<div id="map" style="height: 400px;"></div> 
   <script type="text/javascript"> 
     var map = new google.maps.Map(document.getElementById('map'), { 
        mapTypeId: google.maps.MapTypeId.TERRAIN,
        center: new google.maps.LatLng(42.49, 18.46),
        zoom: 6
     });

     var geocoder = new google.maps.Geocoder();

     function geocode () {
        geocoder.geocode({
           'address': document.getElementById('search').value
        }, 
        function(results, status) {
           if(status == google.maps.GeocoderStatus.OK) {
              new google.maps.Marker({
                 position: results[0].geometry.location,
                 map: map
              });
              map.setCenter(results[0].geometry.location);
           }
        });
     }   
   </script> 
  	</div>
  	
  <h3>Comments</h3>
  <% @comments.each do |comment| %>
    <div class="ibox-title">
      <strong>
        <%= comment.user_name %>
      </strong>
      <br/>
      <p>
        <%= comment.body %>
      </p>
      <!--/ %p= link_to 'Delete', comment_path(comment), method: :delete, data: { confirm: 'Are you sure?' }
      -->
    </div>
  <% end %>
  <%= render 'comments/form' %>
<% else %>
 <div class="ibox-title">
  <p>Please <a href="../users/sign_in">sign in</a> to view more</p>
  </div>
<% end %>
